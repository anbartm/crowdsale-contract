# The CoFab crowdsale and token contracts! 🐵

A token and crowdsale contract. Structured as a Truffle project within a node
package. Create a token and a crowdsale and deploy them to a local RPC, a
testnet or the ethereum mainnet!

Installing this installs all the dependencies locally, so you don't have to
worry about conflicting truffle or solc versions.

## Setting up the project 🔧

* Install `node` and `yarn`
* Do `yarn install`. This will install truffle and ganache-cli locally

## Start a ganache-cli server 📟

To start the ganache local blockchain, just do: `yarn start`. If you want
a graphical interface, download and install the UI version
of ganache and run it at `http://127.0.0.1:8545`

## Running the tests 🏃🏾‍♂️

Once `ganache-cli` is running, do `yarn truffle test` to deploy
the test contracts on your ganache server and run the tests.

## Deploying the contracts to the local ganache server 🚀

You can deploy the test contracts on your local ganache server by
running:

`yarn truffle migrate --reset`

## Interacting with your smart contracts 🎹

Once you've deployed them to your local ganache, you can interact with
the test contracts by running `yarn truffle console`. You can call all the
external functions of the contracts:

```
$ yarn truffle console
> CrowdsaleTest.deployed().then(instance => crowdsale = instance)
> crowdsale.crowdsaleStartTime().then(x => x.toNumber())
1519747200
```

## Deploying the contracts to kovan 🎷

Get your hands on a wallet that has some kETH, then
set the env variable MNEMONIC to that wallet's mnemonic:

`export MNEMONIC="topple limb ritual hen total large cover horror purse place primary gas"`

⚠️ Don't use this mnemonic to make real wallets!

Edit `crowdsale.conf.js` to adjust the parameters of your crowdsale and token.
Example values are already in place, so you don't have to adjust them to deploy
to kovan.

Do the deployment:

`yarn truffle migrate --network kovan`

Interacting with the contracts:

```
$ yarn truffle console --network kovan
> Crowdsale.deployed().then(instance => crowdsale = instance)
> crowdsale.crowdsaleStartTime().then(x => x.toNumber())
1519747200
```

## Deploying to main net 🎓

Same as deploying to kovan, just with the `live` network.

`yarn truffle migrate --network live`

Be careful though, the wallet that's generated by your mnemonic has to have some
real ETH on it. Ideally, the mnemonic should be stored as a secret in your
CI pipeline, and it should not be your main wallet.
